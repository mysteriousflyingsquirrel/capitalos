---
description: General project rules for Capitalos -- always active baseline
alwaysApply: true
---

# Capitalos — General Rules

## Operating Mode
- Follow repository docs as source of truth.
- Follow docs/ai/orchestra.md for pipeline order and handoffs.
- Do not invent features or flows.
- Prefer small, reviewable changes.

## Architecture
Single Vite + React + TypeScript application:
- src/pages/ — page components
- src/components/ — shared UI components
- src/services/ — backend services (Firestore, exchange integrations, calculations)
- src/contexts/ — React contexts (Auth, Data, Currency, Theme, Incognito, ApiKeys)
- src/hooks/ — custom hooks (valuation, market-data)
- api/ — serverless API functions (perpetuals, snapshots, market data)
- docs/specs/ — engineering specs

## Code Standards
- TypeScript-first.
- No silent failures.
- Keep components small.
- Extract logic into hooks/services.
- Keep naming consistent.

## UI/UX
- When improving UI, apply docs/ui/ui-improvement-guide.md
- Do not change business logic unless requested.

## Working Pattern
When implementing:
1) Provide short plan.
2) Implement.
3) Summarize what changed.
